document.write('<link rel="stylesheet" href="https://gist.github.com/stylesheets/gist/embed.css"/>')





document.write('<div id=\"gist-1193046\" class=\"gist\">\n  \n  \n    \n      \n        \n        \n\n        <div class=\"gist-file\">\n          <div class=\"gist-data gist-syntax\">\n            \n            \n            \n              <div class=\"gist-highlight\"><pre><div class=\'line\' id=\'LC1\'><span class=\"kd\">public<\/span> <span class=\"kd\">class<\/span> <span class=\"nc\">DatoVerifikasjonsFilter<\/span> <span class=\"kd\">implements<\/span> <span class=\"n\">ContainerRequestFilter<\/span> <span class=\"o\">{<\/span><\/div><div class=\'line\' id=\'LC2\'>	<span class=\"nd\">@Override<\/span><\/div><div class=\'line\' id=\'LC3\'>	<span class=\"kd\">public<\/span> <span class=\"n\">ContainerRequest<\/span> <span class=\"nf\">filter<\/span><span class=\"o\">(<\/span><span class=\"kd\">final<\/span> <span class=\"n\">ContainerRequest<\/span> <span class=\"n\">request<\/span><span class=\"o\">)<\/span> <span class=\"o\">{<\/span><\/div><div class=\'line\' id=\'LC4\'>		<span class=\"n\">String<\/span> <span class=\"n\">dato<\/span> <span class=\"o\">=<\/span> <span class=\"n\">request<\/span><span class=\"o\">.<\/span><span class=\"na\">getHeaderValue<\/span><span class=\"o\">(<\/span><span class=\"n\">Headers<\/span><span class=\"o\">.<\/span><span class=\"na\">Date<\/span><span class=\"o\">);<\/span><\/div><div class=\'line\' id=\'LC5\'><br/><\/div><div class=\'line\' id=\'LC6\'>		<span class=\"k\">if<\/span> <span class=\"o\">(<\/span><span class=\"n\">dato<\/span> <span class=\"o\">!=<\/span> <span class=\"kc\">null<\/span><span class=\"o\">)<\/span> <span class=\"o\">{<\/span><\/div><div class=\'line\' id=\'LC7\'>			<span class=\"n\">sjekkDato<\/span><span class=\"o\">(<\/span><span class=\"n\">dato<\/span><span class=\"o\">);<\/span><\/div><div class=\'line\' id=\'LC8\'>		<span class=\"o\">}<\/span> <span class=\"k\">else<\/span> <span class=\"o\">{<\/span><\/div><div class=\'line\' id=\'LC9\'>			<span class=\"c1\">// Kast feil - datoheader mangler!<\/span><\/div><div class=\'line\' id=\'LC10\'>		<span class=\"o\">}<\/span><\/div><div class=\'line\' id=\'LC11\'>		<span class=\"k\">return<\/span> <span class=\"n\">request<\/span><span class=\"o\">;<\/span><\/div><div class=\'line\' id=\'LC12\'>	<span class=\"o\">}<\/span><\/div><div class=\'line\' id=\'LC13\'><br/><\/div><div class=\'line\' id=\'LC14\'>	<span class=\"kd\">private<\/span> <span class=\"kt\">void<\/span> <span class=\"nf\">sjekkDato<\/span><span class=\"o\">(<\/span><span class=\"kd\">final<\/span> <span class=\"n\">String<\/span> <span class=\"n\">dateOnRFC1123Format<\/span><span class=\"o\">)<\/span> <span class=\"o\">{<\/span><\/div><div class=\'line\' id=\'LC15\'>		<span class=\"k\">try<\/span> <span class=\"o\">{<\/span><\/div><div class=\'line\' id=\'LC16\'>			<span class=\"n\">Date<\/span> <span class=\"n\">date<\/span> <span class=\"o\">=<\/span> <span class=\"n\">DateUtil<\/span><span class=\"o\">.<\/span><span class=\"na\">parseDate<\/span><span class=\"o\">(<\/span><span class=\"n\">dateOnRFC1123Format<\/span><span class=\"o\">);<\/span> <span class=\"c1\">// Parser datoen (med Apache commons)<\/span><\/div><div class=\'line\' id=\'LC17\'>			<span class=\"n\">sjekkAtDatoHeaderIkkeErForGammel<\/span><span class=\"o\">(<\/span><span class=\"n\">date<\/span><span class=\"o\">);<\/span> <span class=\"c1\">// Kast feil om den er for gammel<\/span><\/div><div class=\'line\' id=\'LC18\'>			<span class=\"n\">sjekkAtDatoHeaderIkkeErForNy<\/span><span class=\"o\">(<\/span><span class=\"n\">date<\/span><span class=\"o\">);<\/span> <span class=\"c1\">// Kast feil om den er for ny<\/span><\/div><div class=\'line\' id=\'LC19\'>		<span class=\"o\">}<\/span> <span class=\"k\">catch<\/span> <span class=\"o\">(<\/span><span class=\"n\">DateParseException<\/span> <span class=\"n\">e<\/span><span class=\"o\">)<\/span> <span class=\"o\">{<\/span><\/div><div class=\'line\' id=\'LC20\'>			<span class=\"c1\">// Kast feil - dato ikke parsebar<\/span><\/div><div class=\'line\' id=\'LC21\'>		<span class=\"o\">}<\/span><\/div><div class=\'line\' id=\'LC22\'>	<span class=\"o\">}<\/span><\/div><div class=\'line\' id=\'LC23\'><span class=\"o\">}<\/span><\/div><\/pre><\/div>\n            \n          <\/div>\n\n          <div class=\"gist-meta\">\n            <a href=\"https://gist.github.com/raw/1193046/588cbb72f31c0cde37680c556d3ebd4c0d1abc9c/gistfile1.java\" style=\"float:right;\">view raw<\/a>\n            <a href=\"https://gist.github.com/1193046#file_gistfile1.java\" style=\"float:right;margin-right:10px;color:#666\">gistfile1.java<\/a>\n            <a href=\"https://gist.github.com/1193046\">This Gist<\/a> brought to you by <a href=\"http://github.com\">GitHub<\/a>.\n          <\/div>\n        <\/div>\n      \n    \n  \n<\/div>\n')
